# 现有架构分析与学员页面开发规划

> **文档日期**: 2026-01-15
> **分析目的**: 全面分析现有架构，规划学员专属页面开发

---

## 📊 一、现有架构分析

### 1.1 后端架构分析

#### ✅ 已有的核心实体（Entity）

**用户相关**:
- `User` - 用户基础信息
- `Student` - 学员信息
- `Teacher` - 教师信息
- `Role` - 角色定义
- `Permission` - 权限定义

**教学相关**:
- `Course` - 课程信息
- `CourseStudent` - 课程学员关联
- `CourseRecord` - 课程成绩记录
- `Classroom` - 教室信息
- `Homework` - 作业信息 ✅
- `HomeworkSubmission` - 作业提交 ✅
- `DailyReport` - 日报 ✅

**就业相关**:
- `Company` - 企业信息
- `Position` - 职位信息 ✅
- `JobApplication` - 职位申请 ✅
- `Interview` - 面试信息 ✅
- `Offer` - Offer信息 ✅
- `Resume` - 简历信息

**招聘流程**:
- `WrittenTest` - 笔试信息 ✅
- `StudentExamRecord` - 学员考试记录

**通知系统**:
- `Notification` - 系统通知

#### ✅ 已有的核心控制器（Controller）

**用户管理**:
- `AuthController` - 认证登录 ✅
- `UserController` - 用户管理 ✅
- `StudentController` - 学员管理 ✅
- `TeacherController` - 教师管理 ✅
- `RoleController` - 角色管理 ✅

**教学管理**:
- `CourseController` - 课程管理 ✅
- `ClassroomController` - 教室管理 ✅
- `HomeworkController` - 作业管理 ✅
- `HomeworkSubmissionController` - 作业提交 ✅
- `DailyReportController` - 日报管理 ✅
- `ExamController` - 考试管理 ✅

**就业管理**:
- `CompanyController` - 企业管理 ✅
- `PositionController` - 职位管理 ✅
- `JobApplicationController` - 职位申请 ✅
- `InterviewController` - 面试管理 ✅
- `OfferController` - Offer管理 ✅
- `ResumeController` - 简历管理 ✅
- `WrittenTestController` - 笔试管理 ✅

**数据统计**:
- `StatisticsController` - 统计数据 ✅
- `StudentDashboardController` - 学员Dashboard数据 ✅
- `TeacherDashboardController` - 教师Dashboard数据 ✅

**文件管理**:
- `FileUploadController` - 文件上传 ✅

**通知系统**:
- `NotificationController` - 通知管理 ✅

---

### 1.2 前端架构分析

#### ✅ 已有的API封装

**认证相关**:
- `auth.ts` - 登录、注册、退出

**用户相关**:
- `user.ts` - 用户CRUD
- `student.ts` - 学员CRUD
- `teacher.ts` - 教师CRUD

**教学相关**:
- `course.ts` - 课程管理
- `classroom.ts` - 教室管理
- `homework.ts` - 作业管理 ✅
- `dailyReport.ts` - 日报管理 ✅

**就业相关**:
- `company.ts` - 企业管理 ✅
- `position.ts` - 职位管理 ✅
- `jobApplication.ts` - 职位申请 ✅
- `interview.ts` - 面试管理 ✅
- `writtenTest.ts` - 笔试管理
- `application.ts` - 申请管理（可能是jobApplication的别名）

**文件相关**:
- `file.ts` - 文件上传下载

**统计相关**:
- `statistics.ts` - 统计数据 ✅

#### ✅ 已有的页面组件

**Dashboard组件**:
- `AdminDashboard.vue` - 管理员Dashboard ✅（已完善）
- `StudentDashboard.vue` - 学员Dashboard ⚠️（基础版本，需重构）
- `TeacherDashboard.vue` - 教师Dashboard ⚠️（未实现）
- `CollegeHeadDashboard.vue` - 学院负责人Dashboard ⚠️（未实现）
- `EnterpriseDashboard.vue` - 企业Dashboard ⚠️（未实现）

**路由配置**:
- `routes.ts` - 路由配置完整，支持基于角色的权限控制

---

### 1.3 现有架构的优势

✅ **数据库设计完善**:
- 核心业务实体齐全（学员、教师、课程、企业、职位、申请、面试、Offer）
- 支持作业提交（Homework、HomeworkSubmission）
- 支持日报系统（DailyReport）
- 支持简历系统（Resume）

✅ **后端API齐全**:
- 用户认证和授权完整
- CRUD接口齐全
- 业务流程完整（申请→笔试→面试→Offer）

✅ **前端基础扎实**:
- API封装完整
- 路由配置完善
- 权限控制到位
- 组件结构清晰

✅ **已实现功能**:
- 管理员Dashboard完善
- 日报管理功能完整
- 作业管理功能完整
- 面试管理功能完整

---

## 🎯 二、学员页面开发规划

### 2.1 开发目标

基于现有架构，开发功能完整、体验良好的学员专属页面，包括：

1. **学员Dashboard** - 数据概览和快捷入口
2. **职位浏览页面** - 查看和搜索职位
3. **我的申请页面** - 申请状态追踪
4. **面试管理页面** - 面试安排和记录
5. **Offer管理页面** - Offer查看和处理
6. **课程学习页面** - 课程进度和资源
7. **作业管理页面** - 作业提交和查看
8. **个人中心页面** - 个人信息管理

### 2.2 开发优先级

#### 第一批：核心求职功能（1周）

1. ✅ **学员Dashboard重构**
   - 统计卡片（申请数、面试数、Offer数）
   - 推荐职位展示
   - 近期安排（面试、课程、作业）
   - 学习统计

2. ✅ **职位浏览页面**
   - 职位列表展示
   - 搜索和筛选
   - 职位详情查看
   - 一键投递功能

3. ✅ **我的申请页面**
   - 申请记录列表
   - 状态筛选
   - 申请详情查看
   - 进度追踪

#### 第二批：面试和Offer（3-5天）

4. ✅ **面试管理页面**
   - 面试列表
   - 面试详情
   - 面试提醒
   - 面试准备资料

5. ✅ **Offer管理页面**
   - Offer列表
   - Offer详情
   - 接受/拒绝Offer
   - Offer统计

#### 第三批：学习管理（3-5天）

6. ✅ **课程学习页面**
   - 课程列表
   - 课程详情
   - 学习进度
   - 课程资源下载

7. ✅ **作业管理页面**
   - 作业列表（待提交、已提交、已批改）
   - 作业详情
   - 在线提交作业
   - 查看批改结果

#### 第四批：个人中心（2-3天）

8. ✅ **个人中心页面**
   - 个人信息编辑
   - 简历管理
   - 密码修改
   - 头像上传

---

## 📋 三、学员功能详细设计

### 3.1 学员Dashboard（重构版）

#### 页面路由
`/dashboard` (自动根据角色加载)

#### 核心功能
```typescript
{
  "统计卡片": [
    { "已投递职位": "从JobApplication表统计当前学员的申请数" },
    { "待处理面试": "从Interview表统计scheduled状态的面试数" },
    { "收到Offer数": "从Offer表统计当前学员的Offer数" },
    { "在学课程数": "从CourseStudent表统计当前学员的课程数" }
  ],
  "图表展示": [
    { "求职进度图": "申请→筛选→笔试→面试→Offer的漏斗图" },
    { "学习时长图": "近7天学习时长趋势" }
  ],
  "快捷入口": [
    "查看所有职位",
    "我的申请",
    "我的面试",
    "我的课程",
    "提交日报",
    "个人中心"
  ]
}
```

#### API需求
需要创建学员专用的统计API：
```java
// StudentDashboardController 已存在，需要增强
@GetMapping("/overview")
public Result<Map<String, Object>> getStudentOverview(
    @RequestParam Long studentId
) {
    // 返回学员的统计数据
}
```

---

### 3.2 职位浏览页面

#### 页面路由
`/positions` (已存在，需增强)

#### 核心功能
1. 职位列表（分页）
2. 搜索框（职位名称）
3. 筛选器（公司、城市、薪资、职位类型）
4. 排序（发布时间、薪资）
5. 职位详情弹窗
6. 投递按钮（已登录可投递）

#### 现有API
```typescript
// position.ts 已存在
positionApi.getPage({ current, size, ... }) // ✅ 已有
positionApi.getById(id) // ✅ 已有
```

#### 需要增强
- 添加推荐职位API
- 添加收藏职位功能（可选）

---

### 3.3 我的申请页面

#### 页面路由
`/employment/my-applications` (新建)

#### 核心功能
1. 申请记录列表（分页）
2. 状态筛选标签页
   - 全部
   - 待处理
   - 已筛选
   - 笔试中
   - 面试中
   - 已录用
   - 已拒绝
3. 申请详情抽屉
4. 状态流转时间线

#### 现有API
```typescript
// jobApplication.ts 已存在
jobApplicationApi.getPage({ studentId, status, ... }) // ✅ 已有
```

#### 前端组件结构
```vue
<template>
  <div class="my-applications">
    <!-- 状态筛选 -->
    <el-tabs v-model="activeStatus">
      <el-tab-pane label="全部" name="all" />
      <el-tab-pane label="待处理" name="pending" />
      ...
    </el-tabs>

    <!-- 申请列表 -->
    <el-table :data="applications">
      <el-table-column prop="positionName" label="职位" />
      <el-table-column prop="companyName" label="公司" />
      <el-table-column prop="status" label="状态">
        <template #default="{ row }">
          <el-tag :type="getStatusType(row.status)">
            {{ getStatusLabel(row.status) }}
          </el-tag>
        </template>
      </el-table-column>
      <el-table-column prop="createTime" label="申请时间" />
      <el-table-column label="操作">
        <el-button size="small" @click="viewDetail(row)">查看详情</el-button>
      </el-table-column>
    </el-table>

    <!-- 详情抽屉 -->
    <el-drawer v-model="detailVisible" title="申请详情">
      <!-- 申请详情内容 -->
    </el-drawer>
  </div>
</template>
```

---

### 3.4 面试管理页面

#### 页面路由
`/employment/my-interviews` (新建)

#### 核心功能
1. 面试列表（分页）
2. 状态筛选（全部、即将到来、已完成）
3. 面试详情弹窗
4. 面试准备资料
5. 面试时间提醒

#### 现有API
```typescript
// interview.ts 已存在
interviewApi.getPage({ studentId, status, ... }) // ✅ 已有
```

#### 前端组件结构
```vue
<template>
  <div class="my-interviews">
    <!-- 统计卡片 -->
    <el-row :gutter="20">
      <el-col :span="8">
        <el-card>即将到来的面试: {{ upcomingCount }}</el-card>
      </el-col>
      <el-col :span="8">
        <el-card>已完成面试: {{ completedCount }}</el-card>
      </el-col>
      <el-col :span="8">
        <el-card>通过率: {{ passRate }}%</el-card>
      </el-col>
    </el-row>

    <!-- 面试列表 -->
    <el-table :data="interviews">
      <el-table-column prop="positionName" label="职位" />
      <el-table-column prop="companyName" label="公司" />
      <el-table-column prop="interviewTime" label="面试时间" />
      <el-table-column prop="round" label="轮次">
        <template #default="{ row }">
          <el-tag v-if="row.round === 1" type="info">初试</el-tag>
          <el-tag v-else-if="row.round === 2" type="warning">复试</el-tag>
          <el-tag v-else type="success">终试</el-tag>
        </template>
      </el-table-column>
      <el-table-column prop="status" label="状态">
        <template #default="{ row }">
          <el-tag v-if="row.status === 'scheduled'" type="warning">已安排</el-tag>
          <el-tag v-else-if="row.status === 'completed'" type="info">已完成</el-tag>
          <el-tag v-else-if="row.status === 'passed'" type="success">通过</el-tag>
          <el-tag v-else type="danger">未通过</el-tag>
        </template>
      </el-table-column>
      <el-table-column label="操作">
        <el-button size="small" @click="viewDetail(row)">查看详情</el-button>
      </el-table-column>
    </el-table>
  </div>
</template>
```

---

### 3.5 Offer管理页面

#### 页面路由
`/employment/my-offers` (新建)

#### 核心功能
1. Offer列表（分页）
2. 状态筛选（全部、待接受、已接受、已拒绝、已过期）
3. Offer详情弹窗
4. 接受/拒绝Offer
5. Offer对比功能（可选）

#### 现有API
```typescript
// offer.ts 可能不存在，需要创建或使用通用API
```

#### 需要创建的API
```java
// OfferController 增加学员端接口
@GetMapping("/student/{studentId}")
public Result<IPage<Offer>> getStudentOffers(
    @PathVariable Long studentId,
    @RequestParam(required = false) String status,
    @RequestParam Integer current,
    @RequestParam Integer size
) { }

@PutMapping("/{id}/accept")
public Result<Void> acceptOffer(@PathVariable Long id) { }

@PutMapping("/{id}/reject")
public Result<Void> rejectOffer(@PathVariable Long id) { }
```

---

### 3.6 课程学习页面

#### 页面路由
`/teaching/my-courses` (新建)

#### 核心功能
1. 课程列表（卡片式）
2. 课程进度条
3. 课程详情（资源下载、大纲）
4. 学习统计（已完成、进行中）

#### 现有API
```typescript
// course.ts 已存在
courseApi.getPage({ studentId, ... }) // 需要确认
```

#### 前端组件结构
```vue
<template>
  <div class="my-courses">
    <!-- 课程卡片网格 -->
    <el-row :gutter="20">
      <el-col :xs="24" :sm="12" :md="8" :lg="6" v-for="course in courses" :key="course.id">
        <el-card shadow="hover" class="course-card">
          <div class="course-cover">
            <img :src="course.coverUrl || defaultCover" />
          </div>
          <div class="course-info">
            <h3>{{ course.courseName }}</h3>
            <p class="teacher">教师: {{ course.teacherName }}</p>
            <el-progress :percentage="course.progress" />
            <div class="actions">
              <el-button type="primary" @click="viewCourse(course.id)">继续学习</el-button>
            </div>
          </div>
        </el-card>
      </el-col>
    </el-row>
  </div>
</template>
```

---

### 3.7 作业管理页面

#### 页面路由
`/teaching/my-assignments` (新建)

#### 核心功能
1. 作业列表（分页）
2. 状态筛选（全部、未开始、进行中、已提交、已逾期）
3. 作业详情
4. 在线提交作业
5. 查看批改结果

#### 现有API
```typescript
// homework.ts 已存在
homeworkApi.getPage({ studentId, ... }) // ✅ 已有
homeworkSubmissionApi.submit() // ✅ 已有
```

#### 前端组件结构
```vue
<template>
  <div class="my-assignments">
    <!-- 状态筛选 -->
    <el-tabs v-model="activeStatus">
      <el-tab-pane label="全部" name="all" />
      <el-tab-pane label="待提交" name="pending" />
      <el-tab-pane label="已提交" name="submitted" />
      <el-tab-pane label="已批改" name="graded" />
    </el-tabs>

    <!-- 作业列表 -->
    <el-table :data="assignments">
      <el-table-column prop="title" label="作业标题" />
      <el-table-column prop="courseName" label="课程" />
      <el-table-column prop="deadline" label="截止时间">
        <template #default="{ row }">
          <span :class="{ 'text-danger': isOverdue(row.deadline) }">
            {{ formatDate(row.deadline) }}
          </span>
        </template>
      </el-table-column>
      <el-table-column prop="status" label="状态">
        <template #default="{ row }">
          <el-tag v-if="row.status === 'pending'" type="warning">待提交</el-tag>
          <el-tag v-else-if="row.status === 'submitted'" type="info">已提交</el-tag>
          <el-tag v-else-if="row.status === 'graded'" type="success">已批改 ({{ row.score }}分)</el-tag>
        </template>
      </el-table-column>
      <el-table-column label="操作">
        <template #default="{ row }">
          <el-button v-if="row.status === 'pending'" size="small" type="primary" @click="submitAssignment(row)">提交作业</el-button>
          <el-button v-else size="small" @click="viewDetail(row)">查看详情</el-button>
        </template>
      </el-table-column>
    </el-table>

    <!-- 提交作业对话框 -->
    <el-dialog v-model="submitDialogVisible" title="提交作业" width="600px">
      <el-form :model="submitForm" label-width="100px">
        <el-form-item label="作业内容">
          <el-input v-model="submitForm.content" type="textarea" :rows="6" />
        </el-form-item>
        <el-form-item label="附件上传">
          <el-upload
            :action="uploadUrl"
            :on-success="handleUploadSuccess"
            :file-list="submitForm.attachments"
            multiple
          >
            <el-button type="primary">点击上传</el-button>
          </el-upload>
        </el-form-item>
      </el-form>
      <template #footer>
        <el-button @click="submitDialogVisible = false">取消</el-button>
        <el-button type="primary" @click="confirmSubmit">提交</el-button>
      </template>
    </el-dialog>
  </div>
</template>
```

---

### 3.8 个人中心页面

#### 页面路由
`/profile` (已存在，需增强)

#### 核心功能
1. 个人信息展示和编辑
2. 简历上传和管理
3. 密码修改
4. 头像上传

#### 现有API
```typescript
// user.ts, student.ts 已存在
studentApi.getById(id) // ✅ 已有
studentApi.update(data) // ✅ 已有
fileApi.upload(file) // ✅ 已有
```

---

## 🚀 四、开发实施计划

### 4.1 第一周：核心求职功能

#### Day 1-2: Dashboard重构
- [ ] 设计Dashboard布局
- [ ] 创建学员统计API
- [ ] 实现统计卡片
- [ ] 实现图表展示
- [ ] 添加快捷入口

#### Day 3-4: 职位浏览和申请
- [ ] 增强职位列表页面
- [ ] 添加搜索和筛选功能
- [ ] 实现职位详情弹窗
- [ ] 实现一键投递功能

#### Day 5-7: 申请追踪
- [ ] 创建"我的申请"页面
- [ ] 实现申请列表
- [ ] 添加状态筛选
- [ ] 实现申请详情
- [ ] 添加进度追踪

### 4.2 第二周：面试和Offer

#### Day 1-3: 面试管理
- [ ] 创建"我的面试"页面
- [ ] 实现面试列表
- [ ] 添加状态筛选
- [ ] 实现面试详情
- [ ] 添加面试提醒

#### Day 4-5: Offer管理
- [ ] 创建"我的Offer"页面
- [ ] 实现Offer列表
- [ ] 添加Offer详情
- [ ] 实现接受/拒绝功能
- [ ] 添加Offer对比

### 4.3 第三周：学习管理

#### Day 1-3: 课程学习
- [ ] 创建"我的课程"页面
- [ ] 实现课程卡片展示
- [ ] 添加课程进度
- [ ] 实现课程详情

#### Day 4-5: 作业管理
- [ ] 创建"我的作业"页面
- [ ] 实现作业列表
- [ ] 实现在线提交
- [ ] 查看批改结果

### 4.4 第四周：个人中心和优化

#### Day 1-2: 个人中心
- [ ] 增强个人中心页面
- [ ] 实现简历管理
- [ ] 实现密码修改
- [ ] 实现头像上传

#### Day 3-5: 优化和测试
- [ ] 页面样式统一
- [ ] 响应式适配
- [ ] 性能优化
- [ ] 功能测试
- [ ] Bug修复

---

## 📊 五、技术实施细节

### 5.1 API封装规范

所有学员相关API应封装在独立的模块中：

```typescript
// student.ts 增强版
export const studentApi = {
  // Dashboard数据
  getDashboard: (studentId: number) => {
    return http.get<StudentDashboardVO>(`/student/dashboard/${studentId}`)
  },

  // 我的申请
  getApplications: (params: any) => {
    return http.get<IPage<JobApplication>>('/job-application/page', { params })
  },

  // 我的面试
  getInterviews: (params: any) => {
    return http.get<IPage<Interview>>('/interview/page', { params })
  },

  // 我的Offer
  getOffers: (params: any) => {
    return http.get<IPage<Offer>>('/offer/student', { params })
  },

  // 接受Offer
  acceptOffer: (id: number) => {
    return http.put(`/offer/${id}/accept`)
  },

  // 拒绝Offer
  rejectOffer: (id: number, reason: string) => {
    return http.put(`/offer/${id}/reject`, { reason })
  },

  // 我的课程
  getCourses: (params: any) => {
    return http.get<IPage<Course>>('/course/student', { params })
  },

  // 我的作业
  getAssignments: (params: any) => {
    return http.get<IPage<Assignment>>('/homework/student', { params })
  },

  // 提交作业
  submitAssignment: (data: any) => {
    return http.post('/homework-submission/submit', data)
  }
}
```

### 5.2 组件设计规范

#### 统一的列表页布局
```vue
<template>
  <div class="page-container">
    <!-- 页面标题 -->
    <div class="page-header">
      <h2>{{ pageTitle }}</h2>
      <div class="actions">
        <slot name="actions"></slot>
      </div>
    </div>

    <!-- 筛选器 -->
    <el-card shadow="never" class="filter-card">
      <el-form :model="searchForm" inline>
        <slot name="filters"></slot>
      </el-form>
    </el-card>

    <!-- 数据表格 -->
    <el-card shadow="never" class="table-card">
      <el-table :data="tableData" v-loading="loading">
        <slot name="columns"></slot>
      </el-table>
    </el-card>

    <!-- 分页 -->
    <el-pagination
      v-model:current-page="pagination.current"
      v-model:page-size="pagination.size"
      :total="pagination.total"
      @current-change="handlePageChange"
    />
  </div>
</template>
```

#### 统一的样式规范
```scss
// 采用与日报页面一致的朴素风格
.page-container {
  padding: 20px;

  .page-header {
    margin-bottom: 20px;

    h2 {
      margin: 0 0 5px 0;
      font-size: 24px;
      font-weight: 600;
    }
  }

  .filter-card, .table-card {
    margin-bottom: 20px;
    border-radius: 12px;
  }
}
```

### 5.3 权限控制

确保学员只能访问自己的数据：

```typescript
// 在路由守卫中检查角色
router.beforeEach((to, from, next) => {
  const authStore = useAuthStore()
  const userRole = authStore.userRole

  if (to.meta.roles && !to.meta.roles.includes(userRole)) {
    next('/dashboard') // 无权限跳转到Dashboard
  } else {
    next()
  }
})

// 在API调用中自动附加学员ID
const studentId = computed(() => {
  const authStore = useAuthStore()
  return authStore.studentId // 从token或store中获取
})
```

---

## 🎯 六、开发检查清单

### Dashboard
- [ ] 统计卡片数据准确
- [ ] 图表展示正常
- [ ] 快捷入口链接正确
- [ ] 响应式适配

### 职位浏览
- [ ] 职位列表加载正常
- [ ] 搜索功能正常
- [ ] 筛选功能正常
- [ ] 投递功能正常
- [ ] 职位详情展示完整

### 我的申请
- [ ] 申请列表加载正常
- [ ] 状态筛选正常
- [ ] 详情展示完整
- [ ] 进度追踪清晰
- [ ] 分页功能正常

### 面试管理
- [ ] 面试列表加载正常
- [ ] 状态筛选正常
- [ ] 详情展示完整
- [ ] 时间提醒准确
- [ ] 统计数据准确

### Offer管理
- [ ] Offer列表加载正常
- [ ] 详情展示完整
- [ ] 接受功能正常
- [ ] 拒绝功能正常
- [ ] 状态更新及时

### 课程学习
- [ ] 课程列表加载正常
- [ ] 进度显示准确
- [ ] 详情展示完整
- [ ] 资源下载正常

### 作业管理
- [ ] 作业列表加载正常
- [ ] 状态筛选正常
- [ ] 提交功能正常
- [ ] 文件上传正常
- [ ] 批改结果展示完整

### 个人中心
- [ ] 信息编辑正常
- [ ] 简历上传正常
- [ ] 密码修改正常
- [ ] 头像上传正常

---

## 📝 七、总结

### 现有架构优势
1. ✅ 数据库设计完善，核心实体齐全
2. ✅ 后端API完整，业务流程清晰
3. ✅ 前端基础扎实，组件结构合理
4. ✅ 权限控制到位，路由配置完善

### 开发建议
1. **优先开发核心求职功能**：Dashboard、职位浏览、申请追踪
2. **采用统一的UI风格**：参考日报页面的朴素风格
3. **复用现有API**：充分利用已有的后端接口
4. **渐进式开发**：按优先级逐步实现功能
5. **注重用户体验**：清晰的提示、流畅的交互、及时的通知

### 预期成果
完成后，学员角色将拥有：
- 功能完整的求职管理系统
- 直观的学习进度追踪
- 便捷的作业提交和查看
- 完善的个人信息管理
- 统一的UI风格和良好的用户体验

---

**文档结束**
