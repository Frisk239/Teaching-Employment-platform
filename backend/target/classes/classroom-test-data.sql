-- 教室测试数据
-- 执行前请确保已有学校数据（t_school表）
-- 执行时间: 2026-01-18

SET NAMES utf8mb4;
USE teaching_employment_platform;

-- 清空现有教室数据（可选）
-- DELETE FROM t_classroom;

-- 插入教室测试数据
INSERT INTO t_classroom (school_id, classroom_no, classroom_name, building, floor, capacity, classroom_type, has_projector, has_computer, has_multimedia, equipment, status) VALUES
-- 学校1的教室（假设school_id=1）
(1, 'A101', 'A101多媒体教室', 'A栋教学楼', '1F', 60, '多媒体教室', 1, 0, 1, '投影仪：爱普生EB-C760X，音响：环绕立体声，空调：格力2匹', 1),
(1, 'A102', 'A102多媒体教室', 'A栋教学楼', '1F', 60, '多媒体教室', 1, 0, 1, '投影仪：爱普生EB-C760X，音响：环绕立体声，空调：格力2匹', 1),
(1, 'A103', 'A103普通教室', 'A栋教学楼', '1F', 50, '普通教室', 0, 0, 0, '空调：格力1.5匹，白板：4米长', 1),
(1, 'A104', 'A104普通教室', 'A栋教学楼', '1F', 50, '普通教室', 0, 0, 0, '空调：格力1.5匹，白板：4米长', 1),
(1, 'A201', 'A201阶梯教室', 'A栋教学楼', '2F', 120, '阶梯教室', 1, 0, 1, '投影仪：索尼VPL-EX470，音响：专业级扩音系统，麦克风：无线麦2个，空调：大金3匹', 1),
(1, 'A202', 'A202阶梯教室', 'A栋教学楼', '2F', 120, '阶梯教室', 1, 0, 1, '投影仪：索尼VPL-EX470，音响：专业级扩音系统，麦克风：无线麦2个，空调：大金3匹', 1),
(1, 'A203', 'A203实验室', 'A栋教学楼', '2F', 40, '实验室', 1, 0, 1, '投影仪：爱普生，实验台：40个，空调：格力2匹', 1),
(1, 'A204', 'A204实验室', 'A栋教学楼', '2F', 40, '实验室', 1, 0, 1, '投影仪：爱普生，实验台：40个，空调：格力2匹', 1),
(1, 'A301', 'A301计算机教室', 'A栋教学楼', '3F', 60, '计算机教室', 1, 1, 1, '电脑：联想启天M540（60台），投影仪：爱普生，空调：格力3匹', 1),
(1, 'A302', 'A302计算机教室', 'A栋教学楼', '3F', 60, '计算机教室', 1, 1, 1, '电脑：联想启天M540（60台），投影仪：爱普生，空调：格力3匹', 1),
(1, 'A303', 'A303语音教室', 'A栋教学楼', '3F', 50, '语音教室', 1, 1, 1, '电脑：50台，语音设备：专业语音教学系统，耳机：50个，投影仪：爱普生', 1),
(1, 'A304', 'A304多媒体教室', 'A栋教学楼', '3F', 60, '多媒体教室', 1, 0, 1, '投影仪：爱普生EB-C760X，音响：环绕立体声，空调：格力2匹', 1),
(1, 'A401', 'A401普通教室', 'A栋教学楼', '4F', 50, '普通教室', 0, 0, 0, '空调：格力1.5匹，白板：4米长', 1),
(1, 'A402', 'A402普通教室', 'A栋教学楼', '4F', 50, '普通教室', 0, 0, 0, '空调：格力1.5匹，白板：4米长', 1),
(1, 'A403', 'A403普通教室', 'A栋教学楼', '4F', 50, '普通教室', 0, 0, 0, '空调：格力1.5匹，白板：4米长', 1),

-- 学校2的教室（假设school_id=2）
(2, 'B101', 'B101多媒体教室', 'B栋教学楼', '1F', 80, '多媒体教室', 1, 0, 1, '投影仪：明基EX7800，音响：JBL，空调：格力3匹', 1),
(2, 'B102', 'B102多媒体教室', 'B栋教学楼', '1F', 80, '多媒体教室', 1, 0, 1, '投影仪：明基EX7800，音响：JBL，空调：格力3匹', 1),
(2, 'B103', 'B103普通教室', 'B栋教学楼', '1F', 60, '普通教室', 0, 0, 0, '空调：格力2匹，白板：5米长', 1),
(2, 'B104', 'B104普通教室', 'B栋教学楼', '1F', 60, '普通教室', 0, 0, 0, '空调：格力2匹，白板：5米长', 1),
(2, 'B201', 'B201阶梯教室', 'B栋教学楼', '2F', 150, '阶梯教室', 1, 0, 1, '投影仪：巴可RLDMi，音响：专业级音响系统，麦克风：U段无线麦4个，空调：大金5匹', 1),
(2, 'B202', 'B202阶梯教室', 'B栋教学楼', '2F', 150, '阶梯教室', 1, 0, 1, '投影仪：巴可RLDMi，音响：专业级音响系统，麦克风：U段无线麦4个，空调：大金5匹', 1),
(2, 'B301', 'B301计算机教室', 'B栋教学楼', '3F', 80, '计算机教室', 1, 1, 1, '电脑：戴尔OptiPlex 7090（80台），投影仪：明基，空调：格力5匹', 1),
(2, 'B302', 'B302计算机教室', 'B栋教学楼', '3F', 80, '计算机教室', 1, 1, 1, '电脑：戴尔OptiPlex 7090（80台），投影仪：明基，空调：格力5匹', 1),
(2, 'B303', 'B303语音教室', 'B栋教学楼', '3F', 60, '语音教室', 1, 1, 1, '电脑：60台，语音设备：新视野语音教学系统，耳机：60个，投影仪：明基', 1),
(2, 'B304', 'B304实验室', 'B栋教学楼', '3F', 50, '实验室', 1, 0, 1, '投影仪：明基，实验台：50个，空调：格力3匹', 1),

-- 学校2的教室（北京大学）
(2, 'C101', 'C101多媒体教室', 'C栋教学楼', '1F', 70, '多媒体教室', 1, 0, 1, '投影仪：松下PT-X400，音响：先锋，空调：大金2.5匹', 1),
(2, 'C102', 'C102普通教室', 'C栋教学楼', '1F', 55, '普通教室', 0, 0, 0, '空调：大金2匹，白板：4.5米长', 1),
(2, 'C103', 'C103普通教室', 'C栋教学楼', '1F', 55, '普通教室', 0, 0, 0, '空调：大金2匹，白板：4.5米长', 1),
(2, 'C201', 'C201阶梯教室', 'C栋教学楼', '2F', 130, '阶梯教室', 1, 0, 1, '投影仪：NEC M420SK，音响：雅马哈，麦克风：舒尔无线麦，空调：大金4匹', 1),
(2, 'C202', 'C202实验室', 'C栋教学楼', '2F', 45, '实验室', 1, 0, 1, '投影仪：松下，实验台：45个，空调：大金2.5匹', 1),
(2, 'C301', 'C301计算机教室', 'C栋教学楼', '3F', 70, '计算机教室', 1, 1, 1, '电脑：惠普ProDesk 600（70台），投影仪：松下，空调：大金4匹', 1),
(2, 'C302', 'C302语音教室', 'C栋教学楼', '3F', 55, '语音教室', 1, 1, 1, '电脑：55台，语音设备：蓝鸽语音系统，耳机：55个，投影仪：松下', 1),
(2, 'C303', 'C303多媒体教室', 'C栋教学楼', '3F', 70, '多媒体教室', 1, 0, 1, '投影仪：松下PT-X400，音响：先锋，空调：大金2.5匹', 1);

-- 查看插入的数据
SELECT
  id,
  school_id,
  classroom_no,
  classroom_name,
  building,
  floor,
  capacity,
  classroom_type,
  has_projector,
  has_computer,
  has_multimedia,
  status
FROM t_classroom
ORDER BY school_id, classroom_no;

-- 统计信息
SELECT '=== 教室统计 ===' AS '';
SELECT
  school_id AS '学校ID',
  COUNT(*) AS '教室总数',
  SUM(CASE WHEN classroom_type = '普通教室' THEN 1 ELSE 0 END) AS '普通教室',
  SUM(CASE WHEN classroom_type = '多媒体教室' THEN 1 ELSE 0 END) AS '多媒体教室',
  SUM(CASE WHEN classroom_type = '阶梯教室' THEN 1 ELSE 0 END) AS '阶梯教室',
  SUM(CASE WHEN classroom_type = '计算机教室' THEN 1 ELSE 0 END) AS '计算机教室',
  SUM(CASE WHEN classroom_type = '实验室' THEN 1 ELSE 0 END) AS '实验室',
  SUM(CASE WHEN classroom_type = '语音教室' THEN 1 ELSE 0 END) AS '语音教室',
  SUM(CASE WHEN status = 1 THEN 1 ELSE 0 END) AS '可用教室'
FROM t_classroom
GROUP BY school_id
ORDER BY school_id;

SELECT
  COUNT(*) AS '总教室数',
  SUM(CASE WHEN has_projector = 1 THEN 1 ELSE 0 END) AS '有投影仪',
  SUM(CASE WHEN has_computer = 1 THEN 1 ELSE 0 END) AS '有电脑',
  SUM(CASE WHEN has_multimedia = 1 THEN 1 ELSE 0 END) AS '多媒体教室',
  AVG(capacity) AS '平均容纳人数',
  SUM(capacity) AS '总容纳人数'
FROM t_classroom;
